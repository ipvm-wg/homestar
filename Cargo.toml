[workspace]
members = [
    "ipvm",
    "ipvm-guest-wasm",
    "ipvm-wasm"
]

[workspace.package]
authors = ["Brooklyn Zelenka <hello@brooklynzelenka.com>", "Zeeshan Lakhani <zeeshan@fission.codes>"]
edition = "2021"
license = "Apache"
rust-version = "1.66.0"

# Speedup build on macOS
# See https://blog.rust-lang.org/2021/03/25/Rust-1.51.0.html#splitting-debug-information
[profile.dev]
split-debuginfo = "unpacked"

[profile.release.package.ipvm]
# Tell `rustc` to optimize for small code size.
opt-level = "s"

[profile.release.package.ipvm-guest-wasm]
# Perform optimizations on all codegen units.
codegen-units = 1
# Tell `rustc` to optimize for small code size.
opt-level = "z" # or 'z' to optimize "aggressively" for size
# Strip debug symbols
# "symbols" issue: https://github.com/rust-lang/rust/issues/93294
strip = "symbols"
# Amount of debug information.
# 0/false: no debug info at all; 1: line tables only; 2/true: full debug info
debug = false
